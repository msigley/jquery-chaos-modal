/*
 * jQuery Chaos Modal
 * By Matthew Sigley
 * Version 1.13.2
 */
(function(a){function q(c){clearTimeout(a.chaosModalResizeTimer);if(a.chaosModalCurrent){var b=!1;c.data.alwaysAtTop&&(b=c.data.alwaysAtTop);a.chaosModalResizeTimer=setTimeout(n,16,b);a.chaosModalCurrent.resizeModal(b)}}function n(c){clearTimeout(a.chaosModalResizeTimer);a.chaosModalCurrent.resizeModal(c)}function g(c){if(c&&500>Date.now()-a.openTime)return!1;clearTimeout(a.chaosModalClickTimer);a(document).off(".chaosmodal");null!=a.chaosModalCurrent?a.chaosModalCurrent.closeModal():(a(window).trigger("chaos-modal-preprocess-interrupt"),
a("#chaos-modal-mask").hide().remove(),a.fn.closeLoading());a.modalMask=null}function h(c){c.preventDefault();a.chaosModalCurrent.printModal()}function x(a){27==a.which&&g(a)}function y(){var c=a(document),b=a(window),d=a("html");c=c.height();d=d.width();var e=b.height();b=b.width();a("#chaos-modal-mask").css({width:d,height:c});posx=b/2-parseInt(a("#modal-loading").css("width"))/2;posy=e/2-parseInt(a("#modal-loading").css("height"))/2;a.chaosModalLoading=a("#modal-loading");a.chaosModalLoading.css("top",
posy);a.chaosModalLoading.css("left",posx)}var z=function(){var a="undefined"!==typeof navigator?navigator.userAgent:"";return/msie|trident/i.test(a)?(a=a.match(/(?:msie |rv:)(\d+(\.\d+)?)/i))&&1<a.length&&a[1]||"":/chrome.+? edge/i.test(a)?(a=a.match(/edge\/(\d+(\.\d+)?)/i))&&1<a.length&&a[1]||"":""};a(window);var p="";"undefined"!=typeof bowser&&(bowser.msie?p=bowser.version:bowser.msedge&&(p=bowser.version));""===p&&(p=z());a.chaosModalExitFullscreen=function(){if(document.fullscreenElement||document.webkitFullscreenElement||
document.mozFullScreenElement||document.msFullscreenElement){var a;"fullscreenEnabled"in document?a=document.exitFullscreen():"webkitFullscreenEnabled"in document?a=document.webkitExitFullscreen():"mozFullScreenEnabled"in document?a=document.mozCancelFullScreen():"msExitFullscreen"in document&&(a=document.msExitFullscreen());a&&a instanceof Promise&&a.then({})}};a.chaosModalIsVisible=function(a){if(null===a.offsetParent)return!1;if(11>p){var b="";"undefined"!=typeof getComputedStyle?b=window.getComputedStyle(a).display:
"undefined"!=typeof a.currentStyle&&(b=a.currentStyle.display);if("none"==b||"fixed"==b||"absolute"==b)return!1}return!0};a.chaosModalLoading=null;a.modalMask=null;a.chaosModalCurrent=null;a.chaosModalMaxWidth=0;a.chaosModalIndex=0;a.chaosModalImagesLoaded=!1;a.chaosModalIframesLoaded=!1;a.chaosModalVideosLoaded=!1;a.chaosModalClickTimer=!1;a.chaosModalResizeTimer=null;a.chaosModalPrintCSSElements=null;a.fn.openModal=function(c){a.chaosModalExitFullscreen();if(null==a.chaosModalCurrent){var b=this.clone(!0),
d=a("body");a("html");a(document);var e=a(window),f=c.cssClass,r=c.closeLink,k=c.printLink,l=c.alwaysAtTop,v=c.galleryPrevLink,w=c.galleryNextLink;galleryLinkAreas=c.galleryLinkAreas;a.chaosModalMaxWidth=c.maxWidth;a.chaosModalCurrent=b;var t=b.html();b.attr({id:"chaos-current-modal","class":f});b.prepend('<div style="clear: both;"></div>');k&&b.prepend('<a class="print-link" style="float: left; margin: 5px;">Print</a>');r&&b.prepend('<a class="close-link" style="display: block; box-sizing: border-box; position: absolute; z-index: 10; top: -1em; right: -1em; width: 2em; height: 2em; border: 0.2em solid #fff; border-radius: 100%; color: #fff; background: #000; text-align: center; font-size: 15px; line-height: 1.6em; text-decoration: none;">&#10006;</a>');
b.append('<div style="clear: both;"></div>');v&&(b.append('<a class="prev-link" style="display: block; box-sizing: border-box; position: absolute; z-index: 10; top: calc(50% - 1em); left: -1em; width: 2em; height: 2em; border: 0.2em solid #fff; border-radius: 100%; color: #fff; background: #000; text-align: center; font-size: 15px; line-height: 1.6em; text-decoration: none;">&#10094;</a>'),galleryLinkAreas&&b.append('<a class="prev-link area" style="display: block; position: absolute; top: 0; left: 0; width: 20%; height: 100%;"></a>'));
w&&(b.append('<a class="next-link" style="display: block; box-sizing: border-box; position: absolute; z-index: 10; top: calc(50% - 1em); right: -1em; width: 2em; height: 2em; border: 0.2em solid #fff; border-radius: 100%; color: #fff; background: #000; text-align: center; font-size: 15px; line-height: 1.6em; text-decoration: none;">&#10095;</a>'),galleryLinkAreas&&b.append('<a class="next-link area" style="display: block; position: absolute; top: 0; right: 0; width: 80%; height: 100%;"></a>'));b.css({display:"block",
position:"absolute",background:"#fff","z-index":"9002",left:"-10000px",margin:"0",padding:"0"});b.find('img[loading="lazy"]').each(function(){this.loading="eager";this.src&&(this.src=this.src);this.srcset&&(this.srcset=this.srcset)});f=b.find('iframe[src=""]');r=b.find("video");1<f.length+r.length&&(c.iframeAddAutoplay=!1);f.each(function(){var b=a(this),d=b.data("src");if(d){if(c.iframeAddAutoplay){var e=d.indexOf("?");-1==e?d+="?":e!=d.length-1&&(d+="&amp;");d+="autoplay=1";b.attr("allow","autoplay")}b.attr("src",
d).attr("data-src","")}});r.each(function(){var b=a(this),c=b.data("src");c&&b.attr("src",c).attr("data-src","")});r.css({position:"relative","z-index":"9"});b.prependTo(d);if(k){a.chaosModalPrintCSSElements||(a.chaosModalPrintCSSElements=a(document.head).find('link[rel="stylesheet"]'));d=a('<iframe class="print-iframe" width="100" height="100" style="position: absolute; left: -20000px; top: 0;"></iframe>');b.append(d);var m=d.get(0).contentDocument;m.open();m.write("<!DOCTYPE html>");m.write("<html><head>");
a.chaosModalPrintCSSElements.each(function(){m.write(this.outerHTML)});m.write("</head><body>");m.write(t);m.write("</body></html>");m.close()}var u=function(){b.width()>a.chaosModalMaxWidth?b.width(a.chaosModalMaxWidth):b.width(b.width());b.css("max-width","92%");b.find("img").css("max-width","100%");b.hide();b.resizeModal(l);if(0<b.find(".print-link").length)b.find(".print-link").on("click",h);if(0<b.find(".close-link").length)b.find(".close-link").on("click",g);if(0<b.find(".prev-link").length)b.find(".prev-link").on("click",
function(){v.click()});if(0<b.find(".next-link").length)b.find(".next-link").on("click",function(){w.click()});if(c.clickPassthrough)b.find(".fallback-link").on("click",function(){clearTimeout(a.chaosModalClickTimer)});a.modalMask.stop();b.show(0,function(){b.resizeModal(l);e.on("resize",{alwaysAtTop:l},q);a.fn.closeLoading();c.clickPassthrough&&(a.chaosModalClickTimer=setTimeout(function(){clearTimeout(a.chaosModalClickTimer);!window.open(c.clickPassthrough,c.clickTarget)&&confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&
(location.href=c.clickPassthrough)},3E3))})};t=b.find("img").filter(function(b,c){return!a.chaosModalIsVisible(c)||c.complete&&""!=c.getAttribute("src")&&("undefined"==typeof c.naturalWidth||0!=c.naturalWidth)?!1:!0});d=b.find("iframe").filter(function(b,c){return p||!a.chaosModalIsVisible(c)||"complete"==(c.contentDocument||c.contentWindow.document).readyState?!1:!0});k=b.find("video").filter(function(b,c){if(!a.chaosModalIsVisible(c)||2<c.readyState&&""!=c.getAttribute("src")&&("undefined"==typeof c.videoWidth||
0!=c.videoWidth))return!1;c.load();return!0});a.imagesToLoad=t.length;a.iframesToLoad=d.length;a.videosToLoad=k.length;a.imagesToLoad||a.iframesToLoad||a.videosToLoad?(t.on("load",function(){--a.imagesToLoad;a.imagesToLoad||a.iframesToLoad||a.videosToLoad||u()}),d.on("load",function(){--a.iframesToLoad;a.imagesToLoad||a.iframesToLoad||a.videosToLoad||u()}),k.on("canplay",function(){--a.videosToLoad;a.imagesToLoad||a.iframesToLoad||a.videosToLoad||u()})):u();b.show();return this}};a.fn.closeModal=
function(){clearTimeout(a.chaosModalResizeTimer);a(window).off("resize",q);a.chaosModalCurrent=null;0<this.find(".close-link").length&&this.find(".close-link").off("click");this.hide().remove();a("#chaos-modal-mask").hide().remove();a.fn.closeLoading();return this};a.fn.resizeModal=function(c){var b=a(document),d=a(window),e=a("html"),f=b.height(),g=e.width(),h=d.height();e=d.width();a.isFunction(this.resizeIframes)&&this.resizeIframes();f<this.height()&&(f=this.height());g<e&&(g=e);a("#chaos-modal-mask").css({width:g,
height:f});f=h/2-this.height()/2;e=e/2-this.width()/2;0>f&&(f=0);0>e&&(e=0);c?d.scrollTop(0):(f+=d.scrollTop(),c=b.height()-(f+this.height()),0>c&&0<=f+c&&(f+=c));20>f&&(f=20);d.scrollLeft(0);this.css({top:f,left:e});return this};a.fn.printModal=function(){var a=this.find(".print-iframe").get(0).contentWindow;a.focus();a.print()};a.fn.showLoading=function(){a.openTime=Date.now();if(null==a.modalMask){var c=a("body"),b=a(window),d=b.height(),e=b.width();maskClose=!0;a.modalMask=a('<div id="chaos-modal-mask" class="chaos-modal-mask"></div>');
a.modalMask.css({position:"absolute","z-index":"9000","background-color":"rgba(0, 0, 0, 0.8)",display:"none",top:"0",left:"0"});a.modalMask.prependTo(c);a.modalMask.show(0);c=a(document);b=a(window);var f=a("html"),h=c.height();f=f.width();maskClose&&(a.modalMask.on("click",g),c.on("keyup.chaosmodal",x));h<this.height()&&(h=this.height());f<e&&(f=e);a("#chaos-modal-mask").css({width:f,height:h});a("body").append('<div id="modal-loading" style="position: fixed; z-index: 9001; color: #fff;">Loading</div>');
posx=e/2-parseInt(a("#modal-loading").css("width"))/2;posy=d/2-parseInt(a("#modal-loading").css("height"))/2;a.chaosModalLoading=a("#modal-loading");a.chaosModalLoading.css("top",posy);a.chaosModalLoading.css("left",posx);b.on("resize",{alwaysAtTop:!0},y)}};a.fn.closeLoading=function(){a.chaosModalLoading&&a.chaosModalLoading.remove()};a.processModalLink=function(c){var b=a(this);c.preventDefault();b.off("click",a.processModalLink);var d=b.data("chaos-modal-box-id"),e=c=!1,f=/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|wbmp|webp|svg|ico)((\?|#).*)?$)/i,
h=/(\.(mp4)((\?|#).*)?$)/i,k=!1,l=!1;c=d?a("#"+d).first():b.parent().find(".chaos-modal-box").first();c.length?(e=a("<div></div>").css({padding:"20px"}),c.clone(!0).css({display:"block"}).appendTo(e),e=a("<div></div>").css({background:"#fff"}).append(e)):(f.test(b.attr("href"))?(k=a('<img loading="lazy" src="'+b.attr("href")+'" />'),l=b.attr("title")):h.test(b.attr("href"))&&(k=a('<video src="'+b.attr("href")+'" controls />'),l=b.attr("title")),k||(d=b.find("img"),1==d.length&&f.test(d.attr("src"))&&
(k=a('<img loading="lazy" src="'+d.attr("src")+'" />'),l=d.attr("title"))),k||(d=b.find("video"),1==d.length&&f.test(d.attr("src"))&&(k=a('<video src="'+d.attr("src")+'" controls />'),l=d.attr("title"))),k&&(e=a("<div></div>").css({padding:"20px"}),k.css({display:"block","max-height":"calc(80vh - 40px)"}).appendTo(e),e=a("<div></div>").css({background:"#fff"}).append(e),b.data("chaos-modal-gallery-link-areas",!0)),l&&!b.data("chaos-modal-caption")&&(l=(l+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,
"$1<br />$2"),b.data("chaos-modal-caption",imageCaption)));e&&(c.remove(),b.data("chaos-modal-href",b.attr("href")),b.data("chaos-modal-target",b.attr("target")),b.attr({href:"#",target:null,id:"chaos-modal-link-"+a.chaosModalIndex}),e.attr({id:"chaos-modal-box-"+a.chaosModalIndex}),e.hide(),e.appendTo("body"),b.click(function(){g();a.fn.showLoading();var c={maxWidth:960,cssClass:!1,closeLink:!0,printLink:!1,alwaysAtTop:!1,preprocessing:!1,clickPassthrough:!1,iframeAddAutoplay:!0,caption:!1,galleryPrevLink:!1,
galleryNextLink:!1,galleryLinkAreas:!1};a.each(c,function(a,d){var e=b.data("chaos-modal-"+a);"undefined"!==typeof e&&(c[a]="maxWidth"==a?parseInt(e):e)});if(c.caption){var d=a("<div>"+c.caption+"</div>").css({position:"relative","z-index":9,display:"table-caption","caption-side":"bottom","padding-top":0,"padding-right":"20px","padding-bottom":"20px","padding-left":"20px",background:"#fff"});e.children().first().css("display","table").append(d);b.data("chaos-modal-caption","")}c.clickPassthrough&&
(c.clickPassthrough=b.data("chaos-modal-href"),c.clickTarget=b.data("chaos-modal-target"),c.clickTarget||(c.clickTarget="_self"));preprocess=b.attr("data-preprocess");d=a(this).attr("id").match(/chaos-modal-link-(\d+)/i);d[1]&&(d=a("#chaos-modal-box-"+d[1]),1==d.length&&"true"!=preprocess?d.openModal(c):1==d.length&&"true"==preprocess&&b.trigger("chaos-modal-preprocess",[d,c]));return!1}),b.click(),a.chaosModalIndex++);return!1}})(jQuery);
jQuery(document).ready(function(a){function q(){var g=a(this),h=g.attr("src");h&&g.attr("data-src",h).attr("src","")}a(".chaos-modal-link").not("a").each(function(){var g=a(this),h=g.children();g.removeClass("chaos-modal-link");h.not("a").length||1==h.length&&h.addClass("chaos-modal-link")});var n={};a("[data-chaos-modal-gallery]").each(function(){var g=a(this),h=g.data("chaos-modal-gallery");h in n||(n[h]=[]);n[h].push(g)});a.each(n,function(){var g=!1;a.each(this,function(){this.find("a.chaos-modal-link").each(function(){var h=
a(this);h.data("chaos-modal-gallery-prev-link",g);g&&g.data("chaos-modal-gallery-next-link",h);g=h})})});a("a.chaos-modal-link").on("click",a.processModalLink);a(".chaos-modal-box:hidden iframe").each(q);a(".chaos-modal-link").each(function(){var g=a(this).data("chaos-modal-box-id");g&&a("#"+g+":hidden iframe").each(q)})});
