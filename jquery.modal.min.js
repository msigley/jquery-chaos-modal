/*
 * jQuery Chaos Modal
 * By Matthew Sigley
 * Version 1.14.0
 */
(function(a){function y(c){clearTimeout(a.chaosModalResizeTimer);if(a.chaosModalCurrent){var b=!1;c.data.alwaysAtTop&&(b=c.data.alwaysAtTop);a.chaosModalResizeTimer=setTimeout(w,16,b);a.chaosModalCurrent.resizeModal(b)}}function w(c){clearTimeout(a.chaosModalResizeTimer);a.chaosModalCurrent.resizeModal(c)}function h(c){if(c&&500>Date.now()-a.openTime)return!1;clearTimeout(a.chaosModalClickTimer);a(document).off(".chaosmodal");null!=a.chaosModalCurrent?a.chaosModalCurrent.closeModal():(a(window).trigger("chaos-modal-preprocess-interrupt"),
a("#chaos-modal-mask").hide().remove(),a.fn.closeLoading());a.modalMask=null}function k(c){c.preventDefault();a.chaosModalCurrent.printModal()}function A(c){27==c.which&&h(c)}function B(){var c=a(document),b=a(window),d=a("html");c=c.height();d=d.width();var e=b.height();b=b.width();a("#chaos-modal-mask").css({width:d,height:c});posx=b/2-parseInt(a("#modal-loading").css("width"))/2;posy=e/2-parseInt(a("#modal-loading").css("height"))/2;a.chaosModalLoading=a("#modal-loading");a.chaosModalLoading.css("top",
posy);a.chaosModalLoading.css("left",posx)}var C=function(){var c="undefined"!==typeof navigator?navigator.userAgent:"";return/msie|trident/i.test(c)?(c=c.match(/(?:msie |rv:)(\d+(\.\d+)?)/i))&&1<c.length&&c[1]||"":/chrome.+? edge/i.test(c)?(c=c.match(/edge\/(\d+(\.\d+)?)/i))&&1<c.length&&c[1]||"":""};a(window);var x="";"undefined"!=typeof bowser&&(bowser.msie?x=bowser.version:bowser.msedge&&(x=bowser.version));""===x&&(x=C());a.chaosModalExitFullscreen=function(){if(document.fullscreenElement||document.webkitFullscreenElement||
document.mozFullScreenElement||document.msFullscreenElement){var c;"fullscreenEnabled"in document?c=document.exitFullscreen():"webkitFullscreenEnabled"in document?c=document.webkitExitFullscreen():"mozFullScreenEnabled"in document?c=document.mozCancelFullScreen():"msExitFullscreen"in document&&(c=document.msExitFullscreen());c&&c instanceof Promise&&c.then({})}};a.chaosModalIsVisible=function(c){if(null===c.offsetParent)return!1;if(11>x){var b="";"undefined"!=typeof getComputedStyle?b=window.getComputedStyle(c).display:
"undefined"!=typeof c.currentStyle&&(b=c.currentStyle.display);if("none"==b||"fixed"==b||"absolute"==b)return!1}return!0};a.chaosModalLoading=null;a.modalMask=null;a.chaosModalCurrent=null;a.chaosModalMaxWidth=0;a.chaosModalZIndex=1E5;a.chaosModalIndex=0;a.chaosModalImagesLoaded=!1;a.chaosModalIframesLoaded=!1;a.chaosModalVideosLoaded=!1;a.chaosModalClickTimer=!1;a.chaosModalResizeTimer=null;a.chaosModalPrintCSSElements=null;a.fn.openModal=function(c){a.chaosModalExitFullscreen();if(null==a.chaosModalCurrent){var b=
this.clone(!0),d=a("body");a("html");a(document);var e=a(window),l=c.cssClass,g=c.closeLink,m=c.printLink,q=c.alwaysAtTop,n=c.galleryPrevLink,p=c.galleryNextLink;galleryLinkAreas=c.galleryLinkAreas;a.chaosModalMaxWidth=c.maxWidth;a.chaosModalCurrent=b;var u=b.html();b.attr({id:"chaos-current-modal","class":l});b.prepend('<div style="clear: both;"></div>');m&&b.prepend('<a class="print-link" style="float: left; margin: 5px;">Print</a>');g&&b.prepend('<a class="close-link" style="display: block; box-sizing: border-box; position: absolute; z-index: 10; top: -1em; right: -1em; width: 2em; height: 2em; border: 0.2em solid #fff; border-radius: 100%; color: #fff; background: #000; text-align: center; font-size: 15px; line-height: 1.6em; text-decoration: none;">&#10006;</a>');
b.append('<div style="clear: both;"></div>');n&&(b.append('<a class="prev-link" style="display: block; box-sizing: border-box; position: absolute; z-index: 10; top: calc(50% - 1em); left: -1em; width: 2em; height: 2em; border: 0.2em solid #fff; border-radius: 100%; color: #fff; background: #000; text-align: center; font-size: 15px; line-height: 1.6em; text-decoration: none;">&#10094;</a>'),galleryLinkAreas&&b.append('<a class="prev-link area" style="display: block; position: absolute; top: 0; left: 0; width: 20%; height: 100%;"></a>'));
p&&(b.append('<a class="next-link" style="display: block; box-sizing: border-box; position: absolute; z-index: 10; top: calc(50% - 1em); right: -1em; width: 2em; height: 2em; border: 0.2em solid #fff; border-radius: 100%; color: #fff; background: #000; text-align: center; font-size: 15px; line-height: 1.6em; text-decoration: none;">&#10095;</a>'),galleryLinkAreas&&b.append('<a class="next-link area" style="display: block; position: absolute; top: 0; right: 0; width: 80%; height: 100%;"></a>'));b.css({display:"block",
position:"absolute",background:"#fff","z-index":a.chaosModalZIndex+2,left:"-1000000px",margin:"0",padding:"0"});b.find('img[loading="lazy"]').each(function(){this.loading="eager";this.src&&(this.src=this.src);this.srcset&&(this.srcset=this.srcset)});l=b.find('iframe[src=""]');g=b.find("video");1<l.length+g.length&&(c.iframeAddAutoplay=!1);l.each(function(){var r=a(this),f=r.data("src");if(f){if(c.iframeAddAutoplay){var z=f.indexOf("?");-1==z?f+="?":z!=f.length-1&&(f+="&amp;");f+="autoplay=1";r.attr("allow",
"autoplay")}r.attr("src",f).attr("data-src","")}});g.each(function(){var r=a(this),f=r.data("src");f&&r.attr("src",f).attr("data-src","")});g.css({position:"relative","z-index":"9"});b.prependTo(d);if(m){a.chaosModalPrintCSSElements||(a.chaosModalPrintCSSElements=a(document.head).find('link[rel="stylesheet"]'));d=a('<iframe class="print-iframe" width="100" height="100" style="position: absolute; left: -20000px; top: 0;"></iframe>');b.append(d);var t=d.get(0).contentDocument;t.open();t.write("<!DOCTYPE html>");
t.write("<html><head>");a.chaosModalPrintCSSElements.each(function(){t.write(this.outerHTML)});t.write("</head><body>");t.write(u);t.write("</body></html>");t.close()}var v=function(){b.width()>a.chaosModalMaxWidth?b.width(a.chaosModalMaxWidth):b.width(b.width());b.css("max-width","80%");b.find("img").css("max-width","100%");b.hide();b.resizeModal(q);if(0<b.find(".print-link").length)b.find(".print-link").on("click",k);if(0<b.find(".close-link").length)b.find(".close-link").on("click",h);if(0<b.find(".prev-link").length)b.find(".prev-link").on("click",
function(){n.click()});if(0<b.find(".next-link").length)b.find(".next-link").on("click",function(){p.click()});if(c.clickPassthrough)b.find(".fallback-link").on("click",function(){clearTimeout(a.chaosModalClickTimer)});a.modalMask.stop();b.show(0,function(){b.resizeModal(q);e.on("resize",{alwaysAtTop:q},y);a.fn.closeLoading();c.clickPassthrough&&(a.chaosModalClickTimer=setTimeout(function(){clearTimeout(a.chaosModalClickTimer);!window.open(c.clickPassthrough,c.clickTarget)&&confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&
(location.href=c.clickPassthrough)},3E3))})};u=b.find("img").filter(function(r,f){return!a.chaosModalIsVisible(f)||f.complete&&""!=f.getAttribute("src")&&("undefined"==typeof f.naturalWidth||0!=f.naturalWidth)?!1:!0});d=b.find("iframe").filter(function(r,f){return x||!a.chaosModalIsVisible(f)||"complete"==(f.contentDocument||f.contentWindow.document).readyState?!1:!0});m=b.find("video").filter(function(r,f){if(!a.chaosModalIsVisible(f)||2<f.readyState&&""!=f.getAttribute("src")&&("undefined"==typeof f.videoWidth||
0!=f.videoWidth))return!1;f.load();return!0});a.imagesToLoad=u.length;a.iframesToLoad=d.length;a.videosToLoad=m.length;a.imagesToLoad||a.iframesToLoad||a.videosToLoad?(u.on("load",function(){--a.imagesToLoad;a.imagesToLoad||a.iframesToLoad||a.videosToLoad||v()}),d.on("load",function(){--a.iframesToLoad;a.imagesToLoad||a.iframesToLoad||a.videosToLoad||v()}),m.on("canplay",function(){--a.videosToLoad;a.imagesToLoad||a.iframesToLoad||a.videosToLoad||v()})):v();b.show();return this}};a.fn.closeModal=
function(){clearTimeout(a.chaosModalResizeTimer);a(window).off("resize",y);a.chaosModalCurrent=null;0<this.find(".close-link").length&&this.find(".close-link").off("click");this.hide().remove();a("#chaos-modal-mask").hide().remove();a.fn.closeLoading();return this};a.fn.resizeModal=function(c){var b=a(document),d=a(window),e=d.height(),l=d.width();a.isFunction(this.resizeIframes)&&this.resizeIframes();var g=e/2-this.outerHeight()/2;e=Math.min(.1*l,.1*e);0>g&&(g=e);c&&d.scrollTop(0);g+=d.scrollTop();
c=b.height()-e-(g+this.outerHeight());0>c&&(g+=c);g<e&&(g=e);d.scrollLeft(0);d.scrollTop()>g-e&&d.scrollTop(g-e);this.css({top:g,left:"50%",transform:"translate(-50%,0)"});return this};a.fn.printModal=function(){var c=this.find(".print-iframe").get(0).contentWindow;c.focus();c.print()};a.fn.showLoading=function(){a.openTime=Date.now();if(null==a.modalMask){var c=a("body"),b=a(window),d=b.height(),e=b.width();maskClose=!0;a.modalMask=a('<div id="chaos-modal-mask" class="chaos-modal-mask"></div>');
a.modalMask.css({position:"fixed","z-index":a.chaosModalZIndex,"background-color":"rgba(0, 0, 0, 0.5)",display:"none",top:"0",left:"0",width:"100%",height:"100%"});a.modalMask.prependTo(c);a.modalMask.show(0);c=a(document);b=a(window);var l=a("html"),g=c.height();l=l.width();maskClose&&(a.modalMask.on("click",h),c.on("keyup.chaosmodal",A));g<this.height()&&(g=this.height());l<e&&(l=e);a("#chaos-modal-mask").css({width:l,height:g});a("body").append('<div id="modal-loading" style="position: fixed; z-index: '+
(a.chaosModalZIndex+1)+'; color: #fff;">Loading</div>');posx=e/2-parseInt(a("#modal-loading").css("width"))/2;posy=d/2-parseInt(a("#modal-loading").css("height"))/2;a.chaosModalLoading=a("#modal-loading");a.chaosModalLoading.css("top",posy);a.chaosModalLoading.css("left",posx);b.on("resize",{alwaysAtTop:!0},B)}};a.fn.closeLoading=function(){a.chaosModalLoading&&a.chaosModalLoading.remove()};a.processModalLink=function(c){var b=a(this);c.preventDefault();b.off("click",a.processModalLink);var d=b.data("chaos-modal-box-id"),
e=c=!1,l=/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|wbmp|webp|svg|ico)((\?|#).*)?$)/i,g=/(\.(mp4)((\?|#).*)?$)/i,m=!1,q=!1;c=d?a("#"+d).first():b.parent().find(".chaos-modal-box").first();c.length?(e=a("<div></div>").css({padding:"20px"}),c.clone(!0).css({display:"block"}).appendTo(e),e=a("<div></div>").css({background:"#fff"}).append(e)):(l.test(b.attr("href"))?(m=a('<img loading="lazy" src="'+b.attr("href")+'" />'),q=b.attr("title")):g.test(b.attr("href"))&&(m=a('<video src="'+b.attr("href")+
'" controls />'),q=b.attr("title")),m||(d=b.find("img"),1==d.length&&l.test(d.attr("src"))&&(m=a('<img loading="lazy" src="'+d.attr("src")+'" />'),q=d.attr("title"))),m||(d=b.find("video"),1==d.length&&l.test(d.attr("src"))&&(m=a('<video src="'+d.attr("src")+'" controls />'),q=d.attr("title"))),m&&(e=a("<div></div>").css({padding:"20px"}),m.css({display:"block","max-height":"calc(80vh - 40px)"}).appendTo(e),e=a("<div></div>").css({background:"#fff"}).append(e),b.data("chaos-modal-gallery-link-areas",
!0)),q&&!b.data("chaos-modal-caption")&&(q=(q+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2"),b.data("chaos-modal-caption",imageCaption)));e&&(c.remove(),b.data("chaos-modal-href",b.attr("href")),b.data("chaos-modal-target",b.attr("target")),b.attr({href:"#",target:null,id:"chaos-modal-link-"+a.chaosModalIndex}),e.attr({id:"chaos-modal-box-"+a.chaosModalIndex}),e.hide(),e.appendTo("body"),b.click(function(){h();a.fn.showLoading();var n={maxWidth:960,cssClass:!1,closeLink:!0,printLink:!1,
alwaysAtTop:!1,preprocessing:!1,clickPassthrough:!1,iframeAddAutoplay:!0,caption:!1,galleryPrevLink:!1,galleryNextLink:!1,galleryLinkAreas:!1};a.each(n,function(u,t){var v=b.data("chaos-modal-"+u);"undefined"!==typeof v&&(n[u]="maxWidth"==u?parseInt(v):v)});if(n.caption){var p=a("<div>"+n.caption+"</div>").css({position:"relative","z-index":9,display:"table-caption","caption-side":"bottom","padding-top":0,"padding-right":"20px","padding-bottom":"20px","padding-left":"20px",background:"#fff"});e.children().first().css("display",
"table").append(p);b.data("chaos-modal-caption","")}n.clickPassthrough&&(n.clickPassthrough=b.data("chaos-modal-href"),n.clickTarget=b.data("chaos-modal-target"),n.clickTarget||(n.clickTarget="_self"));preprocess=b.attr("data-preprocess");p=a(this).attr("id").match(/chaos-modal-link-(\d+)/i);p[1]&&(p=a("#chaos-modal-box-"+p[1]),1==p.length&&"true"!=preprocess?p.openModal(n):1==p.length&&"true"==preprocess&&b.trigger("chaos-modal-preprocess",[p,n]));return!1}),b.click(),a.chaosModalIndex++);return!1}})(jQuery);
jQuery(document).ready(function(a){function y(){var h=a(this),k=h.attr("src");k&&h.attr("data-src",k).attr("src","")}a(".chaos-modal-link").not("a").each(function(){var h=a(this),k=h.children();h.removeClass("chaos-modal-link");k.not("a").length||1==k.length&&k.addClass("chaos-modal-link")});var w={};a("[data-chaos-modal-gallery]").each(function(){var h=a(this),k=h.data("chaos-modal-gallery");k in w||(w[k]=[]);w[k].push(h)});a.each(w,function(){var h=!1;a.each(this,function(){this.find("a.chaos-modal-link").each(function(){var k=
a(this);k.data("chaos-modal-gallery-prev-link",h);h&&h.data("chaos-modal-gallery-next-link",k);h=k})})});a("a.chaos-modal-link").on("click",a.processModalLink);a(".chaos-modal-box:hidden iframe").each(y);a(".chaos-modal-link").each(function(){var h=a(this).data("chaos-modal-box-id");h&&a("#"+h+":hidden iframe").each(y)})});
